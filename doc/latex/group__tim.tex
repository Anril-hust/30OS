\hypertarget{group__tim}{}\section{Tim}
\label{group__tim}\index{Tim@{Tim}}


this module is in charge of the time recording and timer management.  


\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{struct_t_i_m}{T\+I\+M}
\begin{DoxyCompactList}\small\item\em structure of one timer. \end{DoxyCompactList}\item 
struct \hyperlink{struct_t_i_m___c_t_l}{T\+I\+M\+\_\+\+C\+T\+L}
\begin{DoxyCompactList}\small\item\em structure of global timer\+Ctl. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{group__tim_ga631a00e0b5343d37814e14770345ff9b}{}\#define \hyperlink{group__tim_ga631a00e0b5343d37814e14770345ff9b}{M\+A\+X\+\_\+\+T\+I\+M\+E\+R}~256\label{group__tim_ga631a00e0b5343d37814e14770345ff9b}

\begin{DoxyCompactList}\small\item\em max number of timer can be created. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{struct_t_i_m}{T\+I\+M} \hyperlink{group__tim_ga26669a4a8b52c4fd916ee5faf066be19}{T\+I\+M}
\begin{DoxyCompactList}\small\item\em structure of one timer. \end{DoxyCompactList}\item 
typedef struct \hyperlink{struct_t_i_m___c_t_l}{T\+I\+M\+\_\+\+C\+T\+L} \hyperlink{group__tim_ga4091d5ac2e18168e0642a8e7fb363590}{T\+I\+M\+\_\+\+C\+T\+L}
\begin{DoxyCompactList}\small\item\em structure of global timer\+Ctl. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{group__tim_ga7624bf709371205b24452df8ca316ab2}{tim\+\_\+init} ()
\begin{DoxyCompactList}\small\item\em init timer\+Ctl. \end{DoxyCompactList}\item 
boolean \hyperlink{group__tim_gad08548924a886c19bed954663f37a63f}{timer\+\_\+add} (I\+N uint32 timeout, O\+U\+T \hyperlink{struct_t_i_m}{T\+I\+M} $\ast$$\ast$timer)
\begin{DoxyCompactList}\small\item\em create a timer, add the timer into sorted\+Timer list. \end{DoxyCompactList}\item 
boolean \hyperlink{group__tim_gacc23aa4ba2de1eb3a33370bee74080ad}{timer\+\_\+set\+\_\+timeout} (I\+N \hyperlink{struct_t_i_m}{T\+I\+M} $\ast$timer, I\+N uint32 timeout)
\begin{DoxyCompactList}\small\item\em reset timeout value of timer. \end{DoxyCompactList}\item 
boolean \hyperlink{group__tim_ga9eae53f097274f823e918123904397a4}{timer\+\_\+del} (I\+N \hyperlink{struct_t_i_m}{T\+I\+M} $\ast$timer)
\begin{DoxyCompactList}\small\item\em delete one timer. \end{DoxyCompactList}\item 
boolean \hyperlink{group__tim_ga0d1983206eda05d809414ba0a3c0b539}{timer\+\_\+is\+\_\+valid} (I\+N \hyperlink{struct_t_i_m}{T\+I\+M} $\ast$timer)
\begin{DoxyCompactList}\small\item\em test whether the timer is valid. \end{DoxyCompactList}\item 
uint32 \hyperlink{group__tim_ga4c60fc359f9528c3a6a83c00f6931f65}{timer\+\_\+getcount} ()
\begin{DoxyCompactList}\small\item\em get current time counter. \end{DoxyCompactList}\item 
void \hyperlink{group__tim_gad52b255bc6d45dd3da0df719cd58ef4c}{tim\+\_\+revise} ()
\begin{DoxyCompactList}\small\item\em internal called function. \end{DoxyCompactList}\item 
void \hyperlink{group__tim_ga0962091b087a076d07dbd0f2de6100f4}{tim\+\_\+sort} ()
\begin{DoxyCompactList}\small\item\em sort the timer in sorted\+Timer\mbox{[}\mbox{]} list. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{struct_t_i_m___c_t_l}{T\+I\+M\+\_\+\+C\+T\+L} \hyperlink{group__tim_gaafedf127c23194e2418754189b320aa2}{timer\+Ctl}
\begin{DoxyCompactList}\small\item\em The struct used to hold all timers. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
this module is in charge of the time recording and timer management. 

The time is recorded in timer\+Ctl.\+timecount. all timers restore in timer\+Ctl.\+timers\mbox{[}\mbox{]}. You could refer to \hyperlink{struct_t_i_m___c_t_l}{T\+I\+M\+\_\+\+C\+T\+L} for more information. 

\subsection{Typedef Documentation}
\hypertarget{group__tim_ga26669a4a8b52c4fd916ee5faf066be19}{}\index{Tim@{Tim}!T\+I\+M@{T\+I\+M}}
\index{T\+I\+M@{T\+I\+M}!Tim@{Tim}}
\subsubsection[{T\+I\+M}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf T\+I\+M} {\bf T\+I\+M}}\label{group__tim_ga26669a4a8b52c4fd916ee5faf066be19}


structure of one timer. 

\hypertarget{group__tim_ga4091d5ac2e18168e0642a8e7fb363590}{}\index{Tim@{Tim}!T\+I\+M\+\_\+\+C\+T\+L@{T\+I\+M\+\_\+\+C\+T\+L}}
\index{T\+I\+M\+\_\+\+C\+T\+L@{T\+I\+M\+\_\+\+C\+T\+L}!Tim@{Tim}}
\subsubsection[{T\+I\+M\+\_\+\+C\+T\+L}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf T\+I\+M\+\_\+\+C\+T\+L} {\bf T\+I\+M\+\_\+\+C\+T\+L}}\label{group__tim_ga4091d5ac2e18168e0642a8e7fb363590}


structure of global timer\+Ctl. 



\subsection{Function Documentation}
\hypertarget{group__tim_ga7624bf709371205b24452df8ca316ab2}{}\index{Tim@{Tim}!tim\+\_\+init@{tim\+\_\+init}}
\index{tim\+\_\+init@{tim\+\_\+init}!Tim@{Tim}}
\subsubsection[{tim\+\_\+init}]{\setlength{\rightskip}{0pt plus 5cm}void tim\+\_\+init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{group__tim_ga7624bf709371205b24452df8ca316ab2}


init timer\+Ctl. 

Init timer\+Ctl structure. Set hardware interrupt interval. 
\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{group__tim_gad52b255bc6d45dd3da0df719cd58ef4c}{}\index{Tim@{Tim}!tim\+\_\+revise@{tim\+\_\+revise}}
\index{tim\+\_\+revise@{tim\+\_\+revise}!Tim@{Tim}}
\subsubsection[{tim\+\_\+revise}]{\setlength{\rightskip}{0pt plus 5cm}void tim\+\_\+revise (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{group__tim_gad52b255bc6d45dd3da0df719cd58ef4c}


internal called function. 

if the counter is overflow. then set time counter to 0 and revise every timer existed. 
\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{group__tim_ga0962091b087a076d07dbd0f2de6100f4}{}\index{Tim@{Tim}!tim\+\_\+sort@{tim\+\_\+sort}}
\index{tim\+\_\+sort@{tim\+\_\+sort}!Tim@{Tim}}
\subsubsection[{tim\+\_\+sort}]{\setlength{\rightskip}{0pt plus 5cm}void tim\+\_\+sort (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{group__tim_ga0962091b087a076d07dbd0f2de6100f4}


sort the timer in sorted\+Timer\mbox{[}\mbox{]} list. 


\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{group__tim_gad08548924a886c19bed954663f37a63f}{}\index{Tim@{Tim}!timer\+\_\+add@{timer\+\_\+add}}
\index{timer\+\_\+add@{timer\+\_\+add}!Tim@{Tim}}
\subsubsection[{timer\+\_\+add}]{\setlength{\rightskip}{0pt plus 5cm}boolean timer\+\_\+add (
\begin{DoxyParamCaption}
\item[{I\+N uint32}]{timeout, }
\item[{O\+U\+T {\bf T\+I\+M} $\ast$$\ast$}]{timer}
\end{DoxyParamCaption}
)}\label{group__tim_gad08548924a886c19bed954663f37a63f}


create a timer, add the timer into sorted\+Timer list. 

input timeout value. unit of timeout is 10ms. 
\begin{DoxyParams}{Parameters}
{\em timeout} & the timeout value in 10ms. \\
\hline
{\em timer} & the timer handle you can used to reset timeout, stop timer, del timer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether add operation is successful. if yes, return T\+R\+U\+E els F\+A\+L\+S\+E. 
\end{DoxyReturn}
\hypertarget{group__tim_ga9eae53f097274f823e918123904397a4}{}\index{Tim@{Tim}!timer\+\_\+del@{timer\+\_\+del}}
\index{timer\+\_\+del@{timer\+\_\+del}!Tim@{Tim}}
\subsubsection[{timer\+\_\+del}]{\setlength{\rightskip}{0pt plus 5cm}boolean timer\+\_\+del (
\begin{DoxyParamCaption}
\item[{I\+N {\bf T\+I\+M} $\ast$}]{timer}
\end{DoxyParamCaption}
)}\label{group__tim_ga9eae53f097274f823e918123904397a4}


delete one timer. 

input timer handle to delete the timer. 
\begin{DoxyParams}{Parameters}
{\em timer} & timer handle of the timer you want to delete. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether operation is successful. if yes, return T\+R\+U\+E els F\+A\+L\+S\+E. 
\end{DoxyReturn}
\hypertarget{group__tim_ga4c60fc359f9528c3a6a83c00f6931f65}{}\index{Tim@{Tim}!timer\+\_\+getcount@{timer\+\_\+getcount}}
\index{timer\+\_\+getcount@{timer\+\_\+getcount}!Tim@{Tim}}
\subsubsection[{timer\+\_\+getcount}]{\setlength{\rightskip}{0pt plus 5cm}uint32 timer\+\_\+getcount (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{group__tim_ga4c60fc359f9528c3a6a83c00f6931f65}


get current time counter. 


\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the time counter value. 
\end{DoxyReturn}
\hypertarget{group__tim_ga0d1983206eda05d809414ba0a3c0b539}{}\index{Tim@{Tim}!timer\+\_\+is\+\_\+valid@{timer\+\_\+is\+\_\+valid}}
\index{timer\+\_\+is\+\_\+valid@{timer\+\_\+is\+\_\+valid}!Tim@{Tim}}
\subsubsection[{timer\+\_\+is\+\_\+valid}]{\setlength{\rightskip}{0pt plus 5cm}boolean timer\+\_\+is\+\_\+valid (
\begin{DoxyParamCaption}
\item[{I\+N {\bf T\+I\+M} $\ast$}]{timer}
\end{DoxyParamCaption}
)}\label{group__tim_ga0d1983206eda05d809414ba0a3c0b539}


test whether the timer is valid. 

input timer handle of the timer. 
\begin{DoxyParams}{Parameters}
{\em timer} & timer handle of the timer you want to test. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether the timer is valid. 
\end{DoxyReturn}
\hypertarget{group__tim_gacc23aa4ba2de1eb3a33370bee74080ad}{}\index{Tim@{Tim}!timer\+\_\+set\+\_\+timeout@{timer\+\_\+set\+\_\+timeout}}
\index{timer\+\_\+set\+\_\+timeout@{timer\+\_\+set\+\_\+timeout}!Tim@{Tim}}
\subsubsection[{timer\+\_\+set\+\_\+timeout}]{\setlength{\rightskip}{0pt plus 5cm}boolean timer\+\_\+set\+\_\+timeout (
\begin{DoxyParamCaption}
\item[{I\+N {\bf T\+I\+M} $\ast$}]{timer, }
\item[{I\+N uint32}]{timeout}
\end{DoxyParamCaption}
)}\label{group__tim_gacc23aa4ba2de1eb3a33370bee74080ad}


reset timeout value of timer. 

input timer handle and timeout value. unit of timeout is 10ms. 
\begin{DoxyParams}{Parameters}
{\em timer} & timer handle of the timer you want to set. \\
\hline
{\em timeout} & the timeout value in 10ms. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether operation is successful. if yes, return T\+R\+U\+E els F\+A\+L\+S\+E. 
\end{DoxyReturn}


\subsection{Variable Documentation}
\hypertarget{group__tim_gaafedf127c23194e2418754189b320aa2}{}\index{Tim@{Tim}!timer\+Ctl@{timer\+Ctl}}
\index{timer\+Ctl@{timer\+Ctl}!Tim@{Tim}}
\subsubsection[{timer\+Ctl}]{\setlength{\rightskip}{0pt plus 5cm}{\bf T\+I\+M\+\_\+\+C\+T\+L} timer\+Ctl}\label{group__tim_gaafedf127c23194e2418754189b320aa2}


The struct used to hold all timers. 

