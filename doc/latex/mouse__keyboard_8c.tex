\hypertarget{mouse__keyboard_8c}{}\section{src/mouse\+\_\+keyboard.c File Reference}
\label{mouse__keyboard_8c}\index{src/mouse\+\_\+keyboard.\+c@{src/mouse\+\_\+keyboard.\+c}}


contains mouse and keyboard related information.  


{\ttfamily \#include \char`\"{}mouse\+\_\+keyboard.\+h\char`\"{}}\\*
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\hypertarget{mouse__keyboard_8c_a633080e9601cd863173f0eaf2490587b}{}\#define {\bfseries K\+E\+Y\+\_\+\+T\+B\+L\+\_\+\+S\+I\+Z\+E}~0x59\label{mouse__keyboard_8c_a633080e9601cd863173f0eaf2490587b}

\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{mouse__keyboard_8c_a69b08db00a381a9cad104bb62187a878}{interrupt\+\_\+handler\+\_\+0x21} (int32 $\ast$esp)
\begin{DoxyCompactList}\small\item\em interrupt routine of keyboard. \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_ad9f893ba050719bae099b3b1d5d1146c}{interrupt\+\_\+handler\+\_\+0x2c} (int32 $\ast$esp)
\begin{DoxyCompactList}\small\item\em interrupt routine of mouse. \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_af6af72f1d0cb5d5742c565576f375591}{interrupt\+\_\+handler\+\_\+0x27} (int32 $\ast$esp)
\begin{DoxyCompactList}\small\item\em interrupt routine used to make code workd \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_a34abdc78c759d98043173a4a6201ca84}{wait\+For\+K\+B\+C\+Send\+Ready} ()
\begin{DoxyCompactList}\small\item\em wait for keyboard to be ready for next operation. \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_abe9197e112b3da28ce58f843b708112d}{enable\+Mouse} ()
\begin{DoxyCompactList}\small\item\em enable mouse operation. \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_af4634cae9b64dd421162159e34e8725a}{Init\+Peripheral\+Buffer} ()
\begin{DoxyCompactList}\small\item\em init buffer for mouse and keyboard. \end{DoxyCompactList}\item 
boolean \hyperlink{mouse__keyboard_8c_a918caebba49a6cb1b6911106662e1c35}{Init\+Mouse} ()
\begin{DoxyCompactList}\small\item\em init mouse. \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_a5696e341ca1eb3c499d74e9e95c70638}{Mouse\+Keyboard\+Deamon} ()
\begin{DoxyCompactList}\small\item\em capture mouse and keyboard interruption, save them for future use. \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_a1a120f7ff0f74ebdc1f34384d70b20e4}{Mouse\+Get\+Pos} (\hyperlink{struct_p_o_s}{P\+O\+S} $\ast$pos)
\begin{DoxyCompactList}\small\item\em get pos of mouse \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_a01ccca89f78ef807bb021f66fe1addaf}{Mouse\+Get\+Key} (\hyperlink{struct_k_e_y___d_o_w_n}{K\+E\+Y\+\_\+\+D\+O\+W\+N} $\ast$keydown)
\begin{DoxyCompactList}\small\item\em get keyvalue of mouse \end{DoxyCompactList}\item 
void \hyperlink{mouse__keyboard_8c_a76b51f3fb6a339a55ac945dad1272684}{Init\+Keyboard} ()
\begin{DoxyCompactList}\small\item\em init keyboard \end{DoxyCompactList}\item 
int32 \hyperlink{mouse__keyboard_8c_af9e34965b72e06edbe9d67a16bdfde66}{Keyboard\+Get\+Char} (int8 $\ast$buffer, int32 cnt)
\begin{DoxyCompactList}\small\item\em get key pressed value from keyboard\+Ctl \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hypertarget{mouse__keyboard_8c_a9c88598fb7517d3e0cfd01a513829f99}{}\hyperlink{struct_m_o_u_s_e___c_t_l}{M\+O\+U\+S\+E\+\_\+\+C\+T\+L} {\bfseries mouse\+Ctl}\label{mouse__keyboard_8c_a9c88598fb7517d3e0cfd01a513829f99}

\item 
\hypertarget{mouse__keyboard_8c_adaa56bf70c720efde081a6a778a05f6a}{}\hyperlink{struct_k_e_y_b_o_a_r_d___c_t_l}{K\+E\+Y\+B\+O\+A\+R\+D\+\_\+\+C\+T\+L} {\bfseries keyboard\+Ctl}\label{mouse__keyboard_8c_adaa56bf70c720efde081a6a778a05f6a}

\item 
\hypertarget{mouse__keyboard_8c_a6d77af0e052543e6b5e2935790fdc35e}{}\hyperlink{struct_loop_array}{Loop\+Array} {\bfseries keyboard\+Loop\+Array}\label{mouse__keyboard_8c_a6d77af0e052543e6b5e2935790fdc35e}

\item 
\hypertarget{mouse__keyboard_8c_ab332656e915f5bbf0da70909979f1d27}{}\hyperlink{struct_loop_array}{Loop\+Array} {\bfseries mouse\+Loop\+Array}\label{mouse__keyboard_8c_ab332656e915f5bbf0da70909979f1d27}

\item 
\hypertarget{mouse__keyboard_8c_ab2bfd9e60d07b2dce5ae9ba285e2e0b3}{}\hyperlink{struct_s_h_e_e_t}{S\+H\+E\+E\+T} $\ast$ {\bfseries bg\+Sheet}\label{mouse__keyboard_8c_ab2bfd9e60d07b2dce5ae9ba285e2e0b3}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
contains mouse and keyboard related information. 



\subsection{Function Documentation}
\hypertarget{mouse__keyboard_8c_abe9197e112b3da28ce58f843b708112d}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!enable\+Mouse@{enable\+Mouse}}
\index{enable\+Mouse@{enable\+Mouse}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{enable\+Mouse}]{\setlength{\rightskip}{0pt plus 5cm}void enable\+Mouse (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_abe9197e112b3da28ce58f843b708112d}


enable mouse operation. 


\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_a76b51f3fb6a339a55ac945dad1272684}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!Init\+Keyboard@{Init\+Keyboard}}
\index{Init\+Keyboard@{Init\+Keyboard}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{Init\+Keyboard}]{\setlength{\rightskip}{0pt plus 5cm}void Init\+Keyboard (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_a76b51f3fb6a339a55ac945dad1272684}


init keyboard 


\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L.} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L. 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_a918caebba49a6cb1b6911106662e1c35}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!Init\+Mouse@{Init\+Mouse}}
\index{Init\+Mouse@{Init\+Mouse}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{Init\+Mouse}]{\setlength{\rightskip}{0pt plus 5cm}boolean Init\+Mouse (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_a918caebba49a6cb1b6911106662e1c35}


init mouse. 

This function laod the mouse pixels and draw the mouse on the mouse sheet. 
\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
whether the init is successful. if yes, return T\+R\+U\+E els F\+A\+L\+S\+E; 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_af4634cae9b64dd421162159e34e8725a}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!Init\+Peripheral\+Buffer@{Init\+Peripheral\+Buffer}}
\index{Init\+Peripheral\+Buffer@{Init\+Peripheral\+Buffer}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{Init\+Peripheral\+Buffer}]{\setlength{\rightskip}{0pt plus 5cm}void Init\+Peripheral\+Buffer (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_af4634cae9b64dd421162159e34e8725a}


init buffer for mouse and keyboard. 


\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_a69b08db00a381a9cad104bb62187a878}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!interrupt\+\_\+handler\+\_\+0x21@{interrupt\+\_\+handler\+\_\+0x21}}
\index{interrupt\+\_\+handler\+\_\+0x21@{interrupt\+\_\+handler\+\_\+0x21}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{interrupt\+\_\+handler\+\_\+0x21}]{\setlength{\rightskip}{0pt plus 5cm}void interrupt\+\_\+handler\+\_\+0x21 (
\begin{DoxyParamCaption}
\item[{int32 $\ast$}]{esp}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_a69b08db00a381a9cad104bb62187a878}


interrupt routine of keyboard. 


\begin{DoxyParams}{Parameters}
{\em esp} & value of keyboard operation. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_af6af72f1d0cb5d5742c565576f375591}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!interrupt\+\_\+handler\+\_\+0x27@{interrupt\+\_\+handler\+\_\+0x27}}
\index{interrupt\+\_\+handler\+\_\+0x27@{interrupt\+\_\+handler\+\_\+0x27}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{interrupt\+\_\+handler\+\_\+0x27}]{\setlength{\rightskip}{0pt plus 5cm}void interrupt\+\_\+handler\+\_\+0x27 (
\begin{DoxyParamCaption}
\item[{int32 $\ast$}]{esp}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_af6af72f1d0cb5d5742c565576f375591}


interrupt routine used to make code workd 


\begin{DoxyParams}{Parameters}
{\em esp} & value something I do not know. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_ad9f893ba050719bae099b3b1d5d1146c}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!interrupt\+\_\+handler\+\_\+0x2c@{interrupt\+\_\+handler\+\_\+0x2c}}
\index{interrupt\+\_\+handler\+\_\+0x2c@{interrupt\+\_\+handler\+\_\+0x2c}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{interrupt\+\_\+handler\+\_\+0x2c}]{\setlength{\rightskip}{0pt plus 5cm}void interrupt\+\_\+handler\+\_\+0x2c (
\begin{DoxyParamCaption}
\item[{int32 $\ast$}]{esp}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_ad9f893ba050719bae099b3b1d5d1146c}


interrupt routine of mouse. 


\begin{DoxyParams}{Parameters}
{\em esp} & value of mouse operation. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_af9e34965b72e06edbe9d67a16bdfde66}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!Keyboard\+Get\+Char@{Keyboard\+Get\+Char}}
\index{Keyboard\+Get\+Char@{Keyboard\+Get\+Char}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{Keyboard\+Get\+Char}]{\setlength{\rightskip}{0pt plus 5cm}int32 Keyboard\+Get\+Char (
\begin{DoxyParamCaption}
\item[{int8 $\ast$}]{buffer, }
\item[{int32}]{cnt}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_af9e34965b72e06edbe9d67a16bdfde66}


get key pressed value from keyboard\+Ctl 


\begin{DoxyParams}{Parameters}
{\em buffer} & the buffer to contain these buffer. \\
\hline
{\em cnt} & the length of buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the cnt key value in the buffer. would be less than var cnt. 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_a01ccca89f78ef807bb021f66fe1addaf}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!Mouse\+Get\+Key@{Mouse\+Get\+Key}}
\index{Mouse\+Get\+Key@{Mouse\+Get\+Key}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{Mouse\+Get\+Key}]{\setlength{\rightskip}{0pt plus 5cm}void Mouse\+Get\+Key (
\begin{DoxyParamCaption}
\item[{{\bf K\+E\+Y\+\_\+\+D\+O\+W\+N} $\ast$}]{keydown}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_a01ccca89f78ef807bb021f66fe1addaf}


get keyvalue of mouse 


\begin{DoxyParams}{Parameters}
{\em keydown} & get the keyvalue of mouse \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L. 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_a1a120f7ff0f74ebdc1f34384d70b20e4}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!Mouse\+Get\+Pos@{Mouse\+Get\+Pos}}
\index{Mouse\+Get\+Pos@{Mouse\+Get\+Pos}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{Mouse\+Get\+Pos}]{\setlength{\rightskip}{0pt plus 5cm}void Mouse\+Get\+Pos (
\begin{DoxyParamCaption}
\item[{{\bf P\+O\+S} $\ast$}]{pos}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_a1a120f7ff0f74ebdc1f34384d70b20e4}


get pos of mouse 


\begin{DoxyParams}{Parameters}
{\em pos} & return the pos of current mouse. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L. 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_a5696e341ca1eb3c499d74e9e95c70638}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!Mouse\+Keyboard\+Deamon@{Mouse\+Keyboard\+Deamon}}
\index{Mouse\+Keyboard\+Deamon@{Mouse\+Keyboard\+Deamon}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{Mouse\+Keyboard\+Deamon}]{\setlength{\rightskip}{0pt plus 5cm}void Mouse\+Keyboard\+Deamon (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_a5696e341ca1eb3c499d74e9e95c70638}


capture mouse and keyboard interruption, save them for future use. 

Tackle the interruption of mouse and keyboard. move the mouse directly, save the keyboard state into keyboard\+Ctl. program should get the pressed key from keyboard\+Ctl through \hyperlink{mouse__keyboard_8c_af9e34965b72e06edbe9d67a16bdfde66}{Keyboard\+Get\+Char()}. 
\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
\hypertarget{mouse__keyboard_8c_a34abdc78c759d98043173a4a6201ca84}{}\index{mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}!wait\+For\+K\+B\+C\+Send\+Ready@{wait\+For\+K\+B\+C\+Send\+Ready}}
\index{wait\+For\+K\+B\+C\+Send\+Ready@{wait\+For\+K\+B\+C\+Send\+Ready}!mouse\+\_\+keyboard.\+c@{mouse\+\_\+keyboard.\+c}}
\subsubsection[{wait\+For\+K\+B\+C\+Send\+Ready}]{\setlength{\rightskip}{0pt plus 5cm}void wait\+For\+K\+B\+C\+Send\+Ready (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\label{mouse__keyboard_8c_a34abdc78c759d98043173a4a6201ca84}


wait for keyboard to be ready for next operation. 


\begin{DoxyParams}{Parameters}
{\em N\+U\+L\+L} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\+U\+L\+L 
\end{DoxyReturn}
